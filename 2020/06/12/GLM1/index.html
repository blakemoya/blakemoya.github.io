<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
    <meta name="description" content="A small blog">
    <meta name="keywords"  content="Blake Moya">
    <meta name="theme-color" content="#000000">
    
    <!-- Open Graph -->
    <meta property="og:title" content="Generalizing Linear Models: Part 1 - ">
    
    <meta property="og:type" content="article">
    <meta property="og:description" content="Integrating Predictor Types: Categorical and Continuous
">
    
    <meta property="article:published_time" content="2020-06-12T00:00:00Z">
    
    
    <meta property="article:author" content="Blake">
    
    
    <meta property="article:tag" content="R">
    
    <meta property="article:tag" content="GLM">
    
    <meta property="article:tag" content="Visualization">
    
    
    <meta property="og:image" content="http://0.0.0.0:4000/img/avatar-indirect.jpg">
    <meta property="og:url" content="http://0.0.0.0:4000/2020/06/12/GLM1/">
    <meta property="og:site_name" content="">
    
    <title>Generalizing Linear Models: Part 1 - </title>

    <!-- Web App Manifest -->
    <link rel="manifest" href="/pwa/manifest.json">

    <!-- Favicon -->
    <link rel="shortcut icon" href="/img/favicon.ico">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="http://0.0.0.0:4000/2020/06/12/GLM1/">

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/hux-blog.min.css">
    <!-- Custom highlighting -->
    <link rel="stylesheet" href="/css/rouge-base16.css">

    <!-- Custom Fonts -->
    <!-- <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"> -->
    <!-- Hux change font-awesome CDN to qiniu -->
    <link href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- ga & ba script hoook -->
    <script></script>

    <!-- add htmlwidgets files -->
    
    
    <script src="/htmlwidgets_deps/htmlwidgets-1.5.1/htmlwidgets.js"></script>
<link href="/htmlwidgets_deps/rglwidgetClass-2/rgl.css" rel="stylesheet" />
<script src="/htmlwidgets_deps/rglwidgetClass-2/rglClass.src.js"></script>
<script src="/htmlwidgets_deps/CanvasMatrix4-2016/CanvasMatrix.src.js"></script>
<script src="/htmlwidgets_deps/rglWebGL-binding-0.100.50/rglWebGL.js"></script>
<script src="/htmlwidgets_deps/jquery-1.11.3/jquery.min.js"></script>
<link href="/htmlwidgets_deps/crosstalk-1.1.0.1/css/crosstalk.css" rel="stylesheet" />
<script src="/htmlwidgets_deps/crosstalk-1.1.0.1/js/crosstalk.min.js"></script>

    
    <!-- end htmlwidgets files -->

</head>


<!-- hack iOS CSS :active style -->
<body ontouchstart="">

    <!-- Navigation -->

<nav class="navbar navbar-default navbar-custom navbar-fixed-top">

    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Blake's Blog</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="/">Home</a>
                    </li>
                    
                    
                    
                    
                    <li>
                        <a href="/about/">About</a>
                    </li>
                    
                    
                    
                    <li>
                        <a href="/archive/">Archive</a>
                    </li>
                    
                    
                    
                    
                    
                    
                    
                    
                </ul>
            </div>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>
<script>
    // Drop Bootstarp low-performance Navbar
    // Use customize navbar with high-quality material design animation
    // in high-perf jank-free CSS3 implementation
    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    var __HuxNav__ = {
        close: function(){
            $navbar.className = " ";
            // wait until animation end.
            setTimeout(function(){
                // prevent frequently toggle
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            },400)
        },
        open: function(){
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }

    // Bind Event
    $toggle.addEventListener('click', function(e){
        if ($navbar.className.indexOf('in') > 0) {
            __HuxNav__.close()
        }else{
            __HuxNav__.open()
        }
    })

    /**
     * Since Fastclick is used to delegate 'touchstart' globally
     * to hack 300ms delay in iOS by performing a fake 'click',
     * Using 'e.stopPropagation' to stop 'touchstart' event from 
     * $toggle/$collapse will break global delegation.
     * 
     * Instead, we use a 'e.target' filter to prevent handler
     * added to document close HuxNav.  
     *
     * Also, we use 'click' instead of 'touchstart' as compromise
     */
    document.addEventListener('click', function(e){
        if(e.target == $toggle) return;
        if(e.target.className == 'icon-bar') return;
        __HuxNav__.close();
    })
</script>


    <!-- Image to hack wechat -->
<!-- <img src="/img/icon_wechat.png" width="0" height="0"> -->
<!-- <img src="/img/post-bg-glm1.jpg" width="0" height="0"> -->

<!-- Post Header -->



<style type="text/css">
    header.intro-header{
        position: relative;
        background-image: url('/img/post-bg-glm1.jpg');
        background: ;
    }

    
</style>

<header class="intro-header" >

    <div class="header-mask"></div>
    
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <div class="tags">
                        
                        <a class="tag" href="/archive/?tag=R" title="R">R</a>
                        
                        <a class="tag" href="/archive/?tag=GLM" title="GLM">GLM</a>
                        
                        <a class="tag" href="/archive/?tag=Visualization" title="Visualization">Visualization</a>
                        
                    </div>
                    <h1>Generalizing Linear Models: Part 1</h1>
                    
                    <h2 class="subheading">Linking linear models with categorical and continuous predictors</h2>
                    <span class="meta">Posted by Blake on June 12, 2020</span>
                </div>
            </div>
        </div>
    </div>
</header>






<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">

    <!-- Post Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                post-container">

                <!-- Multi-Lingual -->
                

				<h2 id="integrating-predictor-types-categorical-and-continuous">Integrating Predictor Types: Categorical and Continuous</h2>

<blockquote>
  <p>Information is only useful when it can be understood.<br />
- Muriel Cooper</p>
</blockquote>

<p>Difference is easy to see and hard to define. A great deal of energy in experimentation is spent on locating the <em>source of the difference</em> between two things. Sources of difference are where information hides, and many tools have been developed to tap into that information– chief among those: the <em>linear model</em>. The linear model, simple enough, seeks to explain the differences in a set of observations as a linear combination of the sources of difference, or <em>predictors</em>, that affect them.</p>

<p>Information hides itself in various ways though, and sometimes it’s hard to see a linear model for what it is. Two tools that test for the significance of predictors in a linear model, <em>Analysis of Variance</em> (ANOVA) and <em>Linear Regression</em>, can seem at first to be completely different things. I wanted to take a moment to clarify that both techniques rely on the same underlying structure.</p>

<p>The difference between ANOVA and regression concerns the sources of difference that they test. ANOVA tests the significance of <em>categorical</em> predictor variables, data for which regular arithmetic is impossible. Categorical data includes things like colors, classes, and types; it’s an umbrella term that covers all kinds of abstract groupings of observations. Regression tests the significance of <em>continuous</em> data, anything with meaning that can be represented on a number line. Observations of some variable of interest can be affected by both types of predictor variables, and so here, in the first of a what will be a series of posts about generalized linear models, I’ll try to visualize my intuition behind seeing both as equals in the linear model.</p>

<h3 id="the-data">The Data</h3>

<p>I’ll be using the <code class="highlighter-rouge">ToothGrowth</code> dataset to start as an example. Its documentation states:</p>

<blockquote>
  <p>The response is the length of odontoblasts (cells responsible for tooth growth) in 60 guinea pigs. Each animal received one of three dose levels of vitamin C (0.5, 1, and 2 mg/day) by one of two delivery methods, orange juice or ascorbic acid (a form of vitamin C and coded as VC).
<em>C. I. Bliss (1952). The Statistics of Bioassay. Academic Press.</em></p>
</blockquote>

<p>I think this is a good start because both variables can be coded as either categorical and continuous for the sake of example. Recoding dosage from a numeric into a factor should seem simple enough, and recoding supplement from a factor into a numeric can be analogized as recoding from the name of the supplement (‘orange juice’ and ‘vitamin C’) to something like its vitamin C concentration (arbitrarily, 0.5 and 1.0).</p>

<p>Let’s take a peek at the data:</p>

<p>Each cell in this table is a bucket where 10 <code class="highlighter-rouge">Length</code> observations have been averaged. The goal is ultimately to develop a model that describes <code class="highlighter-rouge">Length</code> in terms of information hidden in the <code class="highlighter-rouge">Supplement</code> and <code class="highlighter-rouge">Dosage</code> variables. In this data, there are only six unique conditions for the 60 observations to fit within. That means best model we can create will give us, at most, six different possible estimates for any <code class="highlighter-rouge">Length</code> we try to predict. Let’s try to visualize this.</p>

<h3 id="informative-visualizations">Informative Visualizations</h3>

<p>The most informative was to display data like this is a boxplot. It shows you the median of the six conditions, as well as information about how observations in each condition are distributed.</p>

<p><img src="/img/in-post/2020-06-12-GLM1/boxplot1-1.png" alt="" /></p>

<p>But for today I’m going to prefer barplots like this one. These only display the mean value of each estimable condition, but that’s useful for us because we want to visualize what kind of things we can estimate based on the information we give to a linear model.</p>

<p><img src="/img/in-post/2020-06-12-GLM1/barplot1-1.png" alt="" /></p>

<p>This leads us into another kind of visualization…</p>

<h3 id="intuitive-visualizations">Intuitive Visualizations</h3>

<p>Yes, intuitive is not the same as informative. I want to make this clear now because an intuition, like a model, is a simple way to understand something that isn’t perfectly correct. I use spatial intuition a lot and so I really like 3d plots and graphs, but they aren’t usefully informative! 3d plots can obscure themselves because at the end of the day they’re being shown to you on a flat screen. Nevertheless, since you can click, drag, and scroll to explore the 3d plots I want to show you, I think they’re useful to help draw the link between regression and ANOVA that I want to make clear.</p>

<h4 id="height-heatmaps-and-tables">Height, Heatmaps, and Tables</h4>

<p>The reason I want to use 3d bar charts specifically is because when you click-and-drag to look at the bars from above, it’s like looking at a data table from before (without marginal means) and having the data climb out from the screen to you. With three dimensions, we can spatially discriminate between <code class="highlighter-rouge">Supplement</code> conditions. I think we can reuse color to be more meaningful, so how about we color the bars based on their height.</p>

<p>Now, when viewed from above, this bar chart resembles a heatmap of the data table. Here’s a heatmap of the data for reference:</p>

<p><img src="/img/in-post/2020-06-12-GLM1/2dheatmap-1.png" alt="" /></p>

<p>And the original table:</p>

<h4 id="boxes-bars-scatters-and-surfaces">Boxes, Bars, Scatters, and Surfaces</h4>

<p>So I already mentioned that the best way to display data like this is a box plot. Why? Because it gave the most real information about the data. The only way we could get more information is by just looking at each observation individually… which we can do. It doesn’t add much to the box plot, but let’s overlay the raw values of the observations onto it for a second.</p>

<p><img src="/img/in-post/2020-06-12-GLM1/boxplot2-1.png" alt="" /></p>

<p>Would it add more to a barplot if we did the same for it? Let’s see…</p>

<p><img src="/img/in-post/2020-06-12-GLM1/barplot2-1.png" alt="" /></p>

<p>Well this looks disppointing so far, but let’s just once again try to translate this into three dimensions because then something should become clear. Be sure to click and drag to rotate the plot around to explore.</p>

<p>Do you see now how this bar chart underlays a scatterplot? We’ve moved from a box plot, the paramount representation of categorical data, to a scatterplot, the most basic representation of continuous data! In fact, I can even draw a regression plane to fit it, and that plane not only approximates the data points, but also the tops of the heatmapped bars from earlier!</p>
<table>
    <tr>
        <td>

</td>
<td>

      </td>
    </tr>
</table>

<h3 id="to-be-continued">To Be Continued…</h3>

<p>I’d like to take a break for now, but I’m getting some animations ready so that next time I can explain how the slopes of the regression plane relate to the beta coefficients for factor levels, how its curvature is related to an interaction effect, and where the terms <em>nominal</em> and <em>ordinal</em> come into this all. I hope to continue <em>generalizing</em> visualizations across different linear model-based techniques until I build up to a full explanation of general linear models and its matrix instantiation.</p>

<p>Thank you,<br />
Blake</p>

<h6 id="special-thanks">Special Thanks</h6>

<p>I finally learned how to embed interactive rgl plots!! This was all thanks to <a href="https://g3rv4.com/2017/08/htmlwidgets-jekyll-rstats">this post</a> by Gervasio Marchand on <a href="https://g3rv4.com/">his blog</a>.</p>

<p>I also want to thank Christopher Wardell for <a href="https://cran.r-project.org/web/packages/barplot3d/">barplot3d</a>, the package I used (slightly modified) to create the 3d barplots.</p>


                <hr style="visibility: hidden;">
                <ul class="pager">
                    
                    <li class="previous">
                        <a href="/2020/06/01/interactive-interactions/" data-toggle="tooltip" data-placement="top" title="Interactive Interactions">
                        Previous<br>
                        <span>Interactive Interactions</span>
                        </a>
                    </li>
                    
                    
                </ul>
                <hr style="visibility: hidden;">

                

                
            </div>  

    <!-- Side Catalog Container -->
        
            <div class="
                col-lg-2 col-lg-offset-0
                visible-lg-block
                sidebar-container
                catalog-container">
                <div class="side-catalog">
                    <hr class="hidden-sm hidden-xs">
                    <h5>
                        <a class="catalog-toggle" href="#">CATALOG</a>
                    </h5>
                    <ul class="catalog-body"></ul>
                </div>
            </div>
        

    <!-- Sidebar Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                sidebar-container">

                <!-- Featured Tags -->
                


<section>
    
        <hr class="hidden-sm hidden-xs">
    
    <h5><a href="/archive/">TAGS</a></h5>
    <div class="tags">
        
        
        
        
        
        
                <a data-sort="0002" 
                    href="/archive/?tag=R"
                    title="R"
                    rel="3">R</a>
    </div>
</section>


                <!-- Friends Blog -->
                
            </div>
        </div>
    </div>
</article>

<!-- add support for mathjax by voleking-->









<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>
<!-- anchor-js, Doc:http://bryanbraun.github.io/anchorjs/ -->
<script>
    async("//cdnjs.cloudflare.com/ajax/libs/anchor-js/1.1.1/anchor.min.js",function(){
        anchors.options = {
          visible: 'hover',
          placement: 'right',
          // icon: '#'
        };
        anchors.add().remove('.intro-header h1').remove('.subheading').remove('.sidebar-container h5');
    })
</script>
<style>
    /* place left on bigger screen */
    @media all and (min-width: 800px) {
        .anchorjs-link{
            position: absolute;
            left: -0.75em;
            font-size: 1.1em;
            margin-top : -0.1em;
        }
    }
</style>



    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <!-- SNS Link -->
                


<ul class="list-inline text-center">


  
  
  
  
  
  
  <li>
    <a target="_blank" href="https://github.com/blakemoya">
      <span class="fa-stack fa-lg">
        <i class="fa fa-circle fa-stack-2x"></i>
        <i class="fa fa-github fa-stack-1x fa-inverse"></i>
      </span>
    </a>
  </li>
  
  
  <li>
    <a target="_blank" href="https://www.linkedin.com/in/blake-moya">
      <span class="fa-stack fa-lg">
        <i class="fa fa-circle fa-stack-2x"></i>
        <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
      </span>
    </a>
  </li>
  
</ul>

                <p class="copyright text-muted">
                    Copyright &copy; Blake's Blog 2020 | Powered by <a href="http://huangxuan.me">Hux Blog</a>
                </p>
            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->
<script src="/js/jquery.min.js "></script>

<!-- Bootstrap Core JavaScript -->
<!-- Currently, only navbar scroll-down effect at desktop still depends on this -->
<script src="/js/bootstrap.min.js "></script>

<!-- Custom Theme JavaScript -->
<script src="/js/hux-blog.min.js "></script>

<!-- Service Worker -->

<script src="/js/snackbar.js "></script>
<script src="/js/sw-registration.js "></script>


<!-- async load function -->
<script>
    function async(u, c) {
        var d = document, t = 'script',
            o = d.createElement(t),
            s = d.getElementsByTagName(t)[0];
        o.src = u;
        if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
        s.parentNode.insertBefore(o, s);
    }
</script>

<!--
     Because of the native support for backtick-style fenced code blocks
     right within the Markdown is landed in Github Pages,
     From V1.6, There is no need for Highlight.js,
     so Huxblog drops it officially.

     - https://github.com/blog/2100-github-pages-now-faster-and-simpler-with-jekyll-3-0
     - https://help.github.com/articles/creating-and-highlighting-code-blocks/
     - https://github.com/jneen/rouge/wiki/list-of-supported-languages-and-lexers
-->
<!--
    <script>
        async("http://cdn.bootcss.com/highlight.js/8.6/highlight.min.js", function(){
            hljs.initHighlightingOnLoad();
        })
    </script>
    <link href="http://cdn.bootcss.com/highlight.js/8.6/styles/github.min.css" rel="stylesheet">
-->







<!--fastClick.js -->
<script>
    async("//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js", function () {
        var $nav = document.querySelector("nav");
        if ($nav) FastClick.attach($nav);
    })
</script>


<!-- Google Analytics -->



<!-- Baidu Tongji -->



<!-- Side Catalog -->

<script type="text/javascript">
    function generateCatalog(selector) {

        // interop with multilangual 
        if ('' == 'true') {
            _containerSelector = 'div.post-container.active'
        } else {
            _containerSelector = 'div.post-container'
        }

        // init
        var P = $(_containerSelector), a, n, t, l, i, c;
        a = P.find('h1,h2,h3,h4,h5,h6');

        // clean
        $(selector).html('')

        // appending
        a.each(function () {
            n = $(this).prop('tagName').toLowerCase();
            i = "#" + $(this).prop('id');
            t = $(this).text();
            c = $('<a href="' + i + '" rel="nofollow">' + t + '</a>');
            l = $('<li class="' + n + '_nav"></li>').append(c);
            $(selector).append(l);
        });
        return true;
    }

    generateCatalog(".catalog-body");

    // toggle side catalog
    $(".catalog-toggle").click((function (e) {
        e.preventDefault();
        $('.side-catalog').toggleClass("fold")
    }))

    /*
     * Doc: https://github.com/davist11/jQuery-One-Page-Nav
     * Fork by Hux to support padding
     */
    async("/js/jquery.nav.js", function () {
        $('.catalog-body').onePageNav({
            currentClass: "active",
            changeHash: !1,
            easing: "swing",
            filter: "",
            scrollSpeed: 700,
            scrollOffset: 0,
            scrollThreshold: .2,
            begin: null,
            end: null,
            scrollChange: null,
            padding: 80
        });
    });
</script>



<!-- Multi-Lingual -->



<!-- Image to hack wechat -->
<!-- <img src="/img/icon_wechat.png" width="0" height="0" /> -->
<!-- Migrate from head to bottom, no longer block render and still work -->

</body>

</html>
